root@redis:/opt# apt list --upgradable
Listing... Done
libmariadb-dev/unknown 1:10.7.4+maria~focal amd64 [upgradable from: 1:10.7.3+maria~focal]
libmariadb3/unknown 1:10.7.4+maria~focal amd64 [upgradable from: 1:10.7.3+maria~focal]
manticore-common/focal 5.0.1-220520-626a6b6cc amd64 [upgradable from: 5.0.1-220519-623b6fd03]
manticore-dev/focal 5.0.1-220520-626a6b6cc all [upgradable from: 5.0.1-220519-623b6fd03]
manticore-icudata-65l/focal 5.0.1-220520-626a6b6cc all [upgradable from: 5.0.1-220519-623b6fd03]
manticore-server-core-dbgsym/focal 5.0.1-220520-626a6b6cc amd64 [upgradable from: 5.0.1-220519-623b6fd03]
manticore-server-core/focal 5.0.1-220520-626a6b6cc amd64 [upgradable from: 5.0.1-220519-623b6fd03]
manticore-server/focal 5.0.1-220520-626a6b6cc amd64 [upgradable from: 5.0.1-220519-623b6fd03]
manticore-tools-dbgsym/focal 5.0.1-220520-626a6b6cc amd64 [upgradable from: 5.0.1-220519-623b6fd03]
manticore-tools/focal 5.0.1-220520-626a6b6cc amd64 [upgradable from: 5.0.1-220519-623b6fd03]
manticore/focal 5.0.1-220520-626a6b6cc amd64 [upgradable from: 5.0.1-220519-623b6fd03]
mariadb-client-10.7/unknown 1:10.7.4+maria~focal amd64 [upgradable from: 1:10.7.3+maria~focal]
mariadb-client-core-10.7/unknown 1:10.7.4+maria~focal amd64 [upgradable from: 1:10.7.3+maria~focal]
mariadb-client/unknown,unknown,unknown,unknown 1:10.7.4+maria~focal all [upgradable from: 1:10.7.3+maria~focal]
mariadb-common/unknown,unknown,unknown,unknown 1:10.7.4+maria~focal all [upgradable from: 1:10.7.3+maria~focal]
mariadb-server-10.7/unknown 1:10.7.4+maria~focal amd64 [upgradable from: 1:10.7.3+maria~focal]
mariadb-server-core-10.7/unknown 1:10.7.4+maria~focal amd64 [upgradable from: 1:10.7.3+maria~focal]
mariadb-server/unknown,unknown,unknown,unknown 1:10.7.4+maria~focal all [upgradable from: 1:10.7.3+maria~focal]
mariadb-test-data/unknown,unknown,unknown,unknown 1:10.7.4+maria~focal all [upgradable from: 1:10.7.3+maria~focal]
mariadb-test/unknown 1:10.7.4+maria~focal amd64 [upgradable from: 1:10.7.3+maria~focal]
mysql-common/unknown,unknown,unknown,unknown 1:10.7.4+maria~focal all [upgradable from: 1:10.7.3+maria~focal]
root@redis:/opt# systemctl stop manticore
root@redis:/opt# systemctl stop mariadb
root@redis:/opt# apt upgrade
Reading package lists... Done
Building dependency tree
Reading state information... Done
Calculating upgrade... Done
The following packages will be upgraded:
  libmariadb-dev libmariadb3 manticore manticore-common manticore-dev manticore-icudata-65l manticore-server manticore-server-core manticore-server-core-dbgsym manticore-tools
  manticore-tools-dbgsym mariadb-client mariadb-client-10.7 mariadb-client-core-10.7 mariadb-common mariadb-server mariadb-server-10.7 mariadb-server-core-10.7 mariadb-test
  mariadb-test-data mysql-common
21 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
Need to get 165 MB of archives.
After this operation, 854 kB of additional disk space will be used.
Do you want to continue? [Y/n] Y
Get:1 https://mirror.download.it/mariadb/repo/10.7/ubuntu focal/main amd64 mysql-common all 1:10.7.4+maria~focal [2884 B]
Get:13 http://repo.manticoresearch.com/repository/manticoresearch_focal_dev focal/main amd64 manticore-tools-dbgsym amd64 5.0.1-220520-626a6b6cc [66.0 MB]
Get:2 https://mirror.download.it/mariadb/repo/10.7/ubuntu focal/main amd64 mariadb-common all 1:10.7.4+maria~focal [4044 B]
Get:3 https://mirror.download.it/mariadb/repo/10.7/ubuntu focal/main amd64 mariadb-server all 1:10.7.4+maria~focal [2828 B]
Get:4 https://mirror.download.it/mariadb/repo/10.7/ubuntu focal/main amd64 mariadb-client all 1:10.7.4+maria~focal [2700 B]
Get:5 https://mirror.download.it/mariadb/repo/10.7/ubuntu focal/main amd64 mariadb-server-10.7 amd64 1:10.7.4+maria~focal [3464 kB]
Get:14 http://repo.manticoresearch.com/repository/manticoresearch_focal_dev focal/main amd64 manticore-tools amd64 5.0.1-220520-626a6b6cc [12.4 MB]
Get:15 http://repo.manticoresearch.com/repository/manticoresearch_focal_dev focal/main amd64 manticore-server-core-dbgsym amd64 5.0.1-220520-626a6b6cc [26.3 MB]
Get:16 http://repo.manticoresearch.com/repository/manticoresearch_focal_dev focal/main amd64 manticore-server-core amd64 5.0.1-220520-626a6b6cc [4803 kB]
Get:17 http://repo.manticoresearch.com/repository/manticoresearch_focal_dev focal/main amd64 manticore-icudata-65l all 5.0.1-220520-626a6b6cc [11.1 MB]
Get:18 http://repo.manticoresearch.com/repository/manticoresearch_focal_dev focal/main amd64 manticore-common all 5.0.1-220520-626a6b6cc [39.7 kB]
Get:19 http://repo.manticoresearch.com/repository/manticoresearch_focal_dev focal/main amd64 manticore amd64 5.0.1-220520-626a6b6cc [1024 B]
Get:20 http://repo.manticoresearch.com/repository/manticoresearch_focal_dev focal/main amd64 manticore-server amd64 5.0.1-220520-626a6b6cc [5254 B]
Get:21 http://repo.manticoresearch.com/repository/manticoresearch_focal_dev focal/main amd64 manticore-dev all 5.0.1-220520-626a6b6cc [4256 B]
Get:6 https://mirror.download.it/mariadb/repo/10.7/ubuntu focal/main amd64 mariadb-server-core-10.7 amd64 1:10.7.4+maria~focal [7206 kB]
Get:7 https://mirror.download.it/mariadb/repo/10.7/ubuntu focal/main amd64 mariadb-client-10.7 amd64 1:10.7.4+maria~focal [2419 kB]
Get:8 https://mirror.download.it/mariadb/repo/10.7/ubuntu focal/main amd64 mariadb-client-core-10.7 amd64 1:10.7.4+maria~focal [835 kB]
Get:9 https://mirror.download.it/mariadb/repo/10.7/ubuntu focal/main amd64 mariadb-test amd64 1:10.7.4+maria~focal [12.5 MB]
Get:10 https://mirror.download.it/mariadb/repo/10.7/ubuntu focal/main amd64 libmariadb-dev amd64 1:10.7.4+maria~focal [159 kB]
Get:11 https://mirror.download.it/mariadb/repo/10.7/ubuntu focal/main amd64 libmariadb3 amd64 1:10.7.4+maria~focal [148 kB]
Get:12 https://mirror.download.it/mariadb/repo/10.7/ubuntu focal/main amd64 mariadb-test-data all 1:10.7.4+maria~focal [18.1 MB]
Fetched 165 MB in 1min 28s (1880 kB/s)
Preconfiguring packages ...
(Reading database ... 151078 files and directories currently installed.)
Preparing to unpack .../mysql-common_1%3a10.7.4+maria~focal_all.deb ...
Unpacking mysql-common (1:10.7.4+maria~focal) over (1:10.7.3+maria~focal) ...
Preparing to unpack .../mariadb-common_1%3a10.7.4+maria~focal_all.deb ...
Unpacking mariadb-common (1:10.7.4+maria~focal) over (1:10.7.3+maria~focal) ...
Preparing to unpack .../mariadb-server_1%3a10.7.4+maria~focal_all.deb ...
Unpacking mariadb-server (1:10.7.4+maria~focal) over (1:10.7.3+maria~focal) ...
Preparing to unpack .../mariadb-client_1%3a10.7.4+maria~focal_all.deb ...
Unpacking mariadb-client (1:10.7.4+maria~focal) over (1:10.7.3+maria~focal) ...
Setting up mysql-common (1:10.7.4+maria~focal) ...
Setting up mariadb-common (1:10.7.4+maria~focal) ...
(Reading database ... 151078 files and directories currently installed.)
Preparing to unpack .../00-mariadb-server-10.7_1%3a10.7.4+maria~focal_amd64.deb ...
/var/lib/mysql: found previous version 10.7
Unpacking mariadb-server-10.7 (1:10.7.4+maria~focal) over (1:10.7.3+maria~focal) ...
dpkg: considering removing mariadb-client-10.7 in favour of mariadb-client-core-10.7 ...
dpkg: yes, will remove mariadb-client-10.7 in favour of mariadb-client-core-10.7
dpkg: considering deconfiguration of mariadb-server-core-10.7, which would be broken by installation of mariadb-client-core-10.7 ...
dpkg: yes, will deconfigure mariadb-server-core-10.7 (broken by mariadb-client-core-10.7)
Preparing to unpack .../01-mariadb-client-core-10.7_1%3a10.7.4+maria~focal_amd64.deb ...
De-configuring mariadb-server-core-10.7 (1:10.7.3+maria~focal) ...
De-configuring mariadb-test (1:10.7.3+maria~focal), to allow removal of mariadb-client-10.7 (1:10.7.3+maria~focal) ...
Unpacking mariadb-client-core-10.7 (1:10.7.4+maria~focal) over (1:10.7.3+maria~focal) ...
Preparing to unpack .../02-mariadb-server-core-10.7_1%3a10.7.4+maria~focal_amd64.deb ...
Unpacking mariadb-server-core-10.7 (1:10.7.4+maria~focal) over (1:10.7.3+maria~focal) ...
Selecting previously unselected package mariadb-client-10.7.
Preparing to unpack .../03-mariadb-client-10.7_1%3a10.7.4+maria~focal_amd64.deb ...
Unpacking mariadb-client-10.7 (1:10.7.4+maria~focal) ...
Preparing to unpack .../04-mariadb-test_1%3a10.7.4+maria~focal_amd64.deb ...
Unpacking mariadb-test (1:10.7.4+maria~focal) over (1:10.7.3+maria~focal) ...
Preparing to unpack .../05-libmariadb-dev_1%3a10.7.4+maria~focal_amd64.deb ...
Unpacking libmariadb-dev (1:10.7.4+maria~focal) over (1:10.7.3+maria~focal) ...
Preparing to unpack .../06-libmariadb3_1%3a10.7.4+maria~focal_amd64.deb ...
Unpacking libmariadb3:amd64 (1:10.7.4+maria~focal) over (1:10.7.3+maria~focal) ...
Preparing to unpack .../07-mariadb-test-data_1%3a10.7.4+maria~focal_all.deb ...
Unpacking mariadb-test-data (1:10.7.4+maria~focal) over (1:10.7.3+maria~focal) ...
Preparing to unpack .../08-manticore-tools-dbgsym_5.0.1-220520-626a6b6cc_amd64.ddeb.deb ...
Unpacking manticore-tools-dbgsym (5.0.1-220520-626a6b6cc) over (5.0.1-220519-623b6fd03) ...
Preparing to unpack .../09-manticore-tools_5.0.1-220520-626a6b6cc_amd64.deb ...
Unpacking manticore-tools (5.0.1-220520-626a6b6cc) over (5.0.1-220519-623b6fd03) ...
Preparing to unpack .../10-manticore-server-core-dbgsym_5.0.1-220520-626a6b6cc_amd64.ddeb.deb ...
Unpacking manticore-server-core-dbgsym (5.0.1-220520-626a6b6cc) over (5.0.1-220519-623b6fd03) ...
Preparing to unpack .../11-manticore-server-core_5.0.1-220520-626a6b6cc_amd64.deb ...
Unpacking manticore-server-core (5.0.1-220520-626a6b6cc) over (5.0.1-220519-623b6fd03) ...
Preparing to unpack .../12-manticore-icudata-65l_5.0.1-220520-626a6b6cc_all.deb ...
Unpacking manticore-icudata-65l (5.0.1-220520-626a6b6cc) over (5.0.1-220519-623b6fd03) ...
Preparing to unpack .../13-manticore-common_5.0.1-220520-626a6b6cc_all.deb ...
Unpacking manticore-common (5.0.1-220520-626a6b6cc) over (5.0.1-220519-623b6fd03) ...
Preparing to unpack .../14-manticore_5.0.1-220520-626a6b6cc_amd64.deb ...
Unpacking manticore (5.0.1-220520-626a6b6cc) over (5.0.1-220519-623b6fd03) ...
Preparing to unpack .../15-manticore-server_5.0.1-220520-626a6b6cc_amd64.deb ...
Unpacking manticore-server (5.0.1-220520-626a6b6cc) over (5.0.1-220519-623b6fd03) ...
Preparing to unpack .../16-manticore-dev_5.0.1-220520-626a6b6cc_all.deb ...
Unpacking manticore-dev (5.0.1-220520-626a6b6cc) over (5.0.1-220519-623b6fd03) ...
Setting up mariadb-test-data (1:10.7.4+maria~focal) ...
Setting up manticore-icudata-65l (5.0.1-220520-626a6b6cc) ...
Setting up manticore-dev (5.0.1-220520-626a6b6cc) ...
Setting up libmariadb3:amd64 (1:10.7.4+maria~focal) ...
Setting up libmariadb-dev (1:10.7.4+maria~focal) ...
Setting up mariadb-server-core-10.7 (1:10.7.4+maria~focal) ...
Setting up manticore-common (5.0.1-220520-626a6b6cc) ...
Setting up manticore-tools (5.0.1-220520-626a6b6cc) ...
Setting up manticore-server-core (5.0.1-220520-626a6b6cc) ...
Manticore Search (https://manticoresearch.com)

Getting Started with Manticore Search:
  https://manual.manticoresearch.com/Quick_start_guide

Learn Manticore with interactive courses:
  https://play.manticoresearch.com/

Configuration file:
   /etc/manticoresearch/manticore.conf

Setting up mariadb-client-core-10.7 (1:10.7.4+maria~focal) ...
Setting up manticore-tools-dbgsym (5.0.1-220520-626a6b6cc) ...
Setting up manticore-server-core-dbgsym (5.0.1-220520-626a6b6cc) ...
Setting up mariadb-client-10.7 (1:10.7.4+maria~focal) ...
Setting up mariadb-client (1:10.7.4+maria~focal) ...
Setting up manticore-server (5.0.1-220520-626a6b6cc) ...
To start Manticore Search service:
  > systemctl start manticore
Job for manticore.service failed because the service did not take the steps required by its unit configuration.
See "systemctl status manticore.service" and "journalctl -xe" for details.
invoke-rc.d: initscript manticore, action "start" failed.
â— manticore.service - Manticore Search Engine
     Loaded: loaded (/run/systemd/generator.early/manticore.service; generated)
     Active: activating (auto-restart) (Result: protocol) since Sat 2022-05-21 07:20:15 EDT; 11ms ago
    Process: 1266162 ExecStartPre=/usr/bin/install -omanticore -gmanticore -m755 -d /var/run/manticore (code=exited, status=0/SUCCESS)
    Process: 1266163 ExecStart=/usr/bin/searchd --config /etc/manticoresearch/manticore.conf $_ADDITIONAL_SEARCHD_PARAMS (code=exited, status=0/SUCCESS)
dpkg: error processing package manticore-server (--configure):
 installed manticore-server package post-installation script subprocess returned error exit status 1
dpkg: dependency problems prevent configuration of manticore:
 manticore depends on manticore-server (= 5.0.1-220520-626a6b6cc); however:
  Package manticore-server is not configured yet.

dpkg: error processing package manticore (--configure):
 dependency problems - leaving unconfigured
Setting up mariadb-server-10.7 (1:10.7.4+maria~focal) ...
Installing new version of config file /etc/mysql/debian-start ...
No apport report written because the error message indicates its a followup error from a previous failure.
                                                                                                          mariadb-extra.socket is a disabled or a static unit not running, not starting it.
mariadb-extra.socket is a disabled or a static unit, not starting it.
Setting up mariadb-server (1:10.7.4+maria~focal) ...
Setting up mariadb-test (1:10.7.4+maria~focal) ...
Processing triggers for systemd (245.4-4ubuntu3.17) ...
Processing triggers for man-db (2.9.1-1) ...
Processing triggers for libc-bin (2.31-0ubuntu9.9) ...
Errors were encountered while processing:
 manticore-server
 manticore
E: Sub-process /usr/bin/dpkg returned an error code (1)
root@redis:/opt# ps aux | grep searchd
mantico+ 1276476  0.0  0.0  28760  3380 ?        S    07:20   0:00 /usr/bin/searchd --config /etc/manticoresearch/manticore.conf --coredump --logreplication --force-preread
mantico+ 1276478 11.0  7.2 35428260 28814828 ?   SLl  07:20   0:04 /usr/bin/searchd --config /etc/manticoresearch/manticore.conf --coredump --logreplication --force-preread
root     1279944  0.0  0.0   8160  2380 pts/0    S+   07:20   0:00 grep --color=auto searchd
root@redis:/opt# systemctl stop manticore
root@redis:/opt# ps aux | grep searchd
root     1281076  0.0  0.0   8160  2380 pts/0    S+   07:21   0:00 grep --color=auto searchd
root@redis:/opt# apt update
Hit:1 http://nova.clouds.archive.ubuntu.com/ubuntu focal InRelease
Get:2 http://security.ubuntu.com/ubuntu focal-security InRelease [114 kB]
Get:4 http://nova.clouds.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]
Hit:5 https://packages.clickhouse.com/deb stable InRelease
Get:6 http://nova.clouds.archive.ubuntu.com/ubuntu focal-backports InRelease [108 kB]
Hit:7 http://repo.manticoresearch.com/repository/manticoresearch_focal_dev focal InRelease
Hit:3 https://mirror.download.it/mariadb/repo/10.7/ubuntu focal InRelease
Hit:8 http://archive.ubuntu.com/ubuntu focal InRelease
Fetched 336 kB in 1s (226 kB/s)
Reading package lists... Done
Building dependency tree
Reading state information... Done
All packages are up to date.
root@redis:/opt# apt upgrade
Reading package lists... Done
Building dependency tree
Reading state information... Done
Calculating upgrade... Done
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
2 not fully installed or removed.
After this operation, 0 B of additional disk space will be used.
Do you want to continue? [Y/n] Y
Setting up manticore-server (5.0.1-220520-626a6b6cc) ...
To start Manticore Search service:
  > systemctl start manticore
Setting up manticore (5.0.1-220520-626a6b6cc) ...
root@redis:/opt# ps aux | grep searchd
mantico+ 1283268  0.0  0.0  28760  3384 ?        S    07:21   0:00 /usr/bin/searchd --config /etc/manticoresearch/manticore.conf --coredump --logreplication --force-preread
mantico+ 1283269 15.2  7.2 35428260 28814668 ?   SLl  07:21   0:03 /usr/bin/searchd --config /etc/manticoresearch/manticore.conf --coredump --logreplication --force-preread
root     1285076  0.0  0.0   8160  2532 pts/0    S+   07:21   0:00 grep --color=auto searchd
